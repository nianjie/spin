name: spin CI

on: push

env:
  GITHUB_API_TOKEN: ${{ secrets.GIST_GITHUB_API_TOKEN }}

jobs:
  take-screenshot:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2.3.4
      - uses: actions/setup-node@v2.1.4
      - run: sudo apt-get install graphicsmagick
      - run: |
          git config --global user.email "4769034+nianjie@users.noreply.github.com"
          git config --global user.name "nj"
      - run: npm ci
      - run: npm run
      - name: Upload main.gif
        uses: actions/upload-artifact@v2.2.1
        with:
          name: main.gif
          # A file, directory or wildcard pattern that describes what to upload
          path: ${{ env.GITHUB_API_TOKEN }}/main.gif
